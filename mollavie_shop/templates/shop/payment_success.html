{% extends "shop/base.html" %}

{% block title %}Order Confirmation - Mollavie{% endblock %}

{% block content %}
<div class="text-center mt-5">
    <h2> Thank you for your purchase!</h2>

    {% if order %}
        <p>Your order ID is <strong>#{{ order.id }}</strong></p>
        <p>You purchased: <strong>{{ order.items.first.product.name }}</strong></p>
        <p>Total: <strong>Â£{{ order.items.first.product.price }}</strong></p>
    {% else %}
        <p>Sorry, we couldn't find your order details.</p>
    {% endif %}

    <a href="{% url 'gallery' %}" class="btn btn-outline-primary mt-3">Continue Browsing</a>
</div>
{% endblock %}



import logging

def payment_success(request):
    try:
        product_id = request.session.get("last_product")
        ...
    except Exception as e:
        logging.exception(e)          # ðŸ‘ˆ prints full stack trace
        messages.error(request, "Unexpected error saving order. Please contact support.")
        return redirect("gallery")
